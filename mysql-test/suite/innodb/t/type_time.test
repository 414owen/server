-- source include/have_innodb.inc

--echo #
--echo #  MDEV-9777 MyISAM and InnoDB work differently when comparing a TIME column to an empty string
--echo #

SET sql_mode='';

CREATE TABLE t1 (a ENUM('a'), b TIME, c INT, KEY(b)) ENGINE=InnoDB;
INSERT INTO t1 VALUES ('','00:00:00',0);
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
ALTER TABLE t1 ENGINE=MyISAM;
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
DROP TABLE t1;

CREATE TABLE t1 (a ENUM('a'), b TIME, c INT) ENGINE=InnoDB;
INSERT INTO t1 VALUES ('','00:00:00',0);
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
ALTER TABLE t1 ENGINE=MyISAM;
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
DROP TABLE t1;

CREATE TABLE t1 (a ENUM('a'), b TIME, c INT, KEY(b)) ENGINE=INNODB;
INSERT INTO t1 VALUES ('','00:00:00',0);
SELECT * FROM t1 WHERE b='';
ALTER TABLE t1 ENGINE=MyISAM;
SELECT * FROM t1 WHERE b='';
DROP TABLE t1;

CREATE TABLE t1 (a ENUM('a'), b TIME, c INT, KEY(b)) ENGINE=InnoDB;
INSERT INTO t1 VALUES ('','00:00:00',0);
SELECT * FROM t1 WHERE a=b;
ALTER TABLE t1 ENGINE=MyISAM;
SELECT * FROM t1 WHERE a=b;
DROP TABLE t1;
