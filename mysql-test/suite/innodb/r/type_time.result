#
#  MDEV-9777 MyISAM and InnoDB work differently when comparing a TIME column to an empty string
#
SET sql_mode='';
CREATE TABLE t1 (a ENUM('a'), b TIME, c INT, KEY(b)) ENGINE=InnoDB;
INSERT INTO t1 VALUES ('','00:00:00',0);
Warnings:
Warning	1265	Data truncated for column 'a' at row 1
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
1
1
Warnings:
Warning	1292	Truncated incorrect time value: ''
ALTER TABLE t1 ENGINE=MyISAM;
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
1
1
Warnings:
Warning	1292	Truncated incorrect time value: ''
DROP TABLE t1;
CREATE TABLE t1 (a ENUM('a'), b TIME, c INT) ENGINE=InnoDB;
INSERT INTO t1 VALUES ('','00:00:00',0);
Warnings:
Warning	1265	Data truncated for column 'a' at row 1
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
1
1
Warnings:
Warning	1292	Truncated incorrect time value: ''
ALTER TABLE t1 ENGINE=MyISAM;
SELECT 1 FROM t1 WHERE (SELECT a FROM t1 group by c) = b;
1
1
Warnings:
Warning	1292	Truncated incorrect time value: ''
DROP TABLE t1;
CREATE TABLE t1 (a ENUM('a'), b TIME, c INT, KEY(b)) ENGINE=INNODB;
INSERT INTO t1 VALUES ('','00:00:00',0);
Warnings:
Warning	1265	Data truncated for column 'a' at row 1
SELECT * FROM t1 WHERE b='';
a	b	c
	00:00:00	0
Warnings:
Warning	1292	Truncated incorrect time value: ''
ALTER TABLE t1 ENGINE=MyISAM;
SELECT * FROM t1 WHERE b='';
a	b	c
	00:00:00	0
Warnings:
Warning	1292	Truncated incorrect time value: ''
DROP TABLE t1;
CREATE TABLE t1 (a ENUM('a'), b TIME, c INT, KEY(b)) ENGINE=InnoDB;
INSERT INTO t1 VALUES ('','00:00:00',0);
Warnings:
Warning	1265	Data truncated for column 'a' at row 1
SELECT * FROM t1 WHERE a=b;
a	b	c
	00:00:00	0
Warnings:
Warning	1292	Truncated incorrect time value: ''
ALTER TABLE t1 ENGINE=MyISAM;
SELECT * FROM t1 WHERE a=b;
a	b	c
	00:00:00	0
Warnings:
Warning	1292	Truncated incorrect time value: ''
DROP TABLE t1;
